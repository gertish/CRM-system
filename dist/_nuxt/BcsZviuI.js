import{_ as E,a as O}from"./BqknfivW.js";import{_ as P}from"./BKKOqPr-.js";import{_ as x}from"./BlDNJJz_.js";import{f as $}from"./FfZMAFrv.js";import{_ as M}from"./B4Xeda-f.js";import{m as I,y as f,c as e,o,a as u,b as C,q as g,F as L,z as A,p as m,t as p,w as y,r as D,n as N,$ as Z,A as b}from"./47DChMVZ.js";import{I as B}from"./CvhfLOJF.js";import{u as F}from"./D4ixzHyG.js";import"./DlAUqK2U.js";const U={class:"deal-item"},k={class:"deal-item__avatar"},z=["src"],j={key:0},q={key:1},R={key:2},W={key:3},G={key:4},J={key:5,class:""},K=I({__name:"DealItem",props:{item:{}},setup(v){const _=v,h=f(()=>`/EditDeals/${_.item.id}`),l=f(()=>{const t={..._.item},c=["streetAddress","city","state","zipCode","roomArea","numberOfPeople","appointmentDate","specialInstructions","roomAccess","price","status"];return Object.keys(t).forEach(d=>{c.includes(d)||delete t[d]}),t});return(t,c)=>{const d=x;return o(),e("div",U,[u("div",k,[u("img",{src:t.item.avatar||g(M),alt:""},null,8,z)]),(o(!0),e(L,null,A(l.value,(r,s)=>(o(),e("div",{key:s,class:"deal-item__order-details"},[s!=="status"&&s!=="appointmentDate"&&s!=="city"&&s!=="state"&&s!=="numberOfPeople"?(o(),e("div",j,p(r),1)):m("",!0),s==="city"?(o(),e("div",q,p(r)+",",1)):m("",!0),s==="state"&&r?(o(),e("div",R,p(r)+",",1)):m("",!0),s==="numberOfPeople"&&r?(o(),e("div",W,p(r)+",",1)):m("",!0),s==="appointmentDate"&&r?(o(),e("div",G,p(g($)(r))+",",1)):m("",!0),s==="status"?(o(),e("div",J,[u("button",null,p(r),1)])):m("",!0)]))),128)),C(d,{to:h.value},{default:y(()=>c[0]||(c[0]=[u("img",{src:E,alt:""},null,-1)])),_:1},8,["to"])])}}}),Q="data:image/svg+xml,%3csvg%20width='22'%20height='22'%20viewBox='0%200%2022%2022'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M15%2021.75H6.99998C2.37998%2021.75%201.51998%2019.6%201.29998%2017.51L0.549983%209.5C0.439983%208.45%200.409983%206.9%201.44998%205.74C2.34998%204.74%203.83998%204.26%205.99998%204.26H16C18.17%204.26%2019.66%204.75%2020.55%205.74C21.59%206.9%2021.56%208.45%2021.45%209.51L20.7%2017.5C20.48%2019.6%2019.62%2021.75%2015%2021.75ZM5.99998%205.75C4.30998%205.75%203.14998%206.08%202.55998%206.74C2.06998%207.28%201.90998%208.11%202.03998%209.35L2.78998%2017.36C2.95998%2018.94%203.38998%2020.25%206.99998%2020.25H15C18.6%2020.25%2019.04%2018.94%2019.21%2017.35L19.96%209.36C20.09%208.11%2019.93%207.28%2019.44%206.74C18.85%206.08%2017.69%205.75%2016%205.75H5.99998Z'%20fill='%237E92A2'/%3e%3cpath%20d='M15%205.75C14.59%205.75%2014.25%205.41%2014.25%205V4.2C14.25%202.42%2014.25%201.75%2011.8%201.75H10.2C7.74998%201.75%207.74998%202.42%207.74998%204.2V5C7.74998%205.41%207.40998%205.75%206.99998%205.75C6.58998%205.75%206.24998%205.41%206.24998%205V4.2C6.24998%202.44%206.24998%200.25%2010.2%200.25H11.8C15.75%200.25%2015.75%202.44%2015.75%204.2V5C15.75%205.41%2015.41%205.75%2015%205.75Z'%20fill='%237E92A2'/%3e%3cpath%20d='M11%2015.75C8.24998%2015.75%208.24998%2014.05%208.24998%2013.03V12C8.24998%2010.59%208.58998%2010.25%209.99998%2010.25H12C13.41%2010.25%2013.75%2010.59%2013.75%2012V13C13.75%2014.04%2013.75%2015.75%2011%2015.75ZM9.74998%2011.75C9.74998%2011.83%209.74998%2011.92%209.74998%2012V13.03C9.74998%2014.06%209.74998%2014.25%2011%2014.25C12.25%2014.25%2012.25%2014.09%2012.25%2013.02V12C12.25%2011.92%2012.25%2011.83%2012.25%2011.75C12.17%2011.75%2012.08%2011.75%2012%2011.75H9.99998C9.91998%2011.75%209.82998%2011.75%209.74998%2011.75Z'%20fill='%237E92A2'/%3e%3cpath%20d='M13%2013.77C12.63%2013.77%2012.3%2013.49%2012.26%2013.11C12.21%2012.7%2012.5%2012.32%2012.91%2012.27C15.55%2011.94%2018.08%2010.94%2020.21%209.39C20.54%209.14%2021.01%209.22%2021.26%209.56C21.5%209.89%2021.43%2010.36%2021.09%2010.61C18.75%2012.31%2015.99%2013.4%2013.09%2013.77C13.06%2013.77%2013.03%2013.77%2013%2013.77Z'%20fill='%237E92A2'/%3e%3cpath%20d='M8.99998%2013.78C8.96998%2013.78%208.93998%2013.78%208.90998%2013.78C6.16998%2013.47%203.49998%2012.47%201.18998%2010.89C0.849983%2010.66%200.759983%2010.19%200.989983%209.85C1.21998%209.51%201.68998%209.42%202.02998%209.65C4.13998%2011.09%206.56998%2012%209.06998%2012.29C9.47998%2012.34%209.77998%2012.71%209.72998%2013.12C9.69998%2013.5%209.37998%2013.78%208.99998%2013.78Z'%20fill='%237E92A2'/%3e%3c/svg%3e",T={class:"deals"},X={key:0},Y={key:1,class:"deals__not-found"},c2=I({__name:"deals",setup(v){const _=B,h=F(),l=D([]),t=D("Price: Low to high"),c=["Price: Low to high","Price: High to low","Date: Old to new","Date: New to old","Status: In Progress","Status: Completed"],d=["Name","Area","Appointment Date","roomAccess","Price","Status","Edit"],r=async()=>{try{const a=await Z("/api/deals");l.value=a||[],h.setDealsLength(l.value.length)}catch(a){console.log("Ошибка при загрузке сделок:",a)}},s=a=>{t.value=a},H=f(()=>{const a=[...l.value];if(t.value.startsWith("Status:")){const n=t.value.replace("Status:","").trim().toLowerCase();return a.filter(i=>i.status.toLowerCase()===n)}return t.value==="Price: Low to high"?a.sort((n,i)=>+n.price-+i.price):t.value==="Price: High to low"?a.sort((n,i)=>+i.price-+n.price):t.value==="Date: Old to new"?a.sort((n,i)=>+new Date(n.appointmentDate)-+new Date(i.appointmentDate)):t.value==="Date: New to old"?a.sort((n,i)=>+new Date(i.appointmentDate)-+new Date(n.appointmentDate)):a});return b("deals",l),N(()=>{r()}),(a,n)=>{const i=O,S=P,V=K;return o(),e("div",T,[C(i,{title:"deals",total:l.value.length,sortOptions:c,onSortChange:s},null,8,["total"]),C(S,{option:d,ImageUrl:g(_)},null,8,["ImageUrl"]),l.value.length>0?(o(),e("div",X,[(o(!0),e(L,null,A(H.value,w=>(o(),e("div",{key:w.id},[C(V,{item:w},null,8,["item"])]))),128))])):(o(),e("div",Y,n[0]||(n[0]=[u("img",{src:Q,alt:""},null,-1),u("p",null,"No deals found.",-1)])))])}}});export{c2 as default};
