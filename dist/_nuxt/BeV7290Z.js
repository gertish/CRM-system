import{m as f,u as D,r as C,y as u,n as g,$ as i,c as y,a as t,q as c,s as r,v as m,E as h,D as T,x as E,o as w}from"./47DChMVZ.js";import{_ as x}from"./Dql-H8dD.js";import{C as b,P as $}from"./B2D-CQDb.js";import{f as P}from"./FfZMAFrv.js";const B={class:"edit-tasks-modal__status"},M=["src"],R={class:"edit-tasks-modal__content"},S={class:"edit-tasks-modal__description"},V={class:"edit-tasks-modal__due-date"},N=f({__name:"[id]",setup(I){const l=D().params.id,e=C({id:"",dueDate:"",description:"",status:"Completed"}),o=u(()=>e.value.dueDate?P(e.value.dueDate):""),p=()=>{e.value.status=e.value.status==="Completed"?"Pending":"Completed"},k=u(()=>e.value.status==="Completed"?b:$),d=()=>E("/tasks/tasks");g(async()=>{try{const a=await i(`/api/tasks/${l}`);e.value=a}catch(a){console.log("Ошибка при загрузке задач:",a)}});const v=async()=>{const a={description:e.value.description,dueDate:new Date(o.value).toISOString(),status:e.value.status};try{const s=await i(`/api/tasks/${l}`,{method:"PATCH",body:a});e.value=s,d()}catch(s){console.log("Ошибка при сохранении задачи:",s)}},_=async()=>{if(confirm("Вы действительно хотите удалить эту задачу?"))try{await i(`/api/tasks/${l}`,{method:"DELETE"}),d()}catch(s){console.log("Ошиюка при удалении задачи:",s)}};return(a,s)=>(w(),y("div",{class:"edit-tasks-overlay",onClick:d},[t("div",{class:"edit-tasks-modal",onClick:s[2]||(s[2]=T(()=>{},["stop"]))},[t("div",{class:"edit-tasks-modal__header"},[s[3]||(s[3]=t("h4",null,"Edit Task",-1)),t("img",{onClick:d,src:x,alt:""})]),t("div",B,[s[4]||(s[4]=t("div",{class:"edit-tasks-modal__title"},[t("h4",null,"Complete?")],-1)),t("div",{class:"edit-tasks-modal__icon-status",onClick:p},[t("img",{src:c(k),alt:""},null,8,M)])]),t("div",R,[t("div",S,[r(t("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>e.value.description=n),type:"text",placeholder:"Enter tasks description"},null,512),[[m,e.value.description]])]),t("div",V,[s[5]||(s[5]=t("h4",null,"Due Date",-1)),r(t("input",{"onUpdate:modelValue":s[1]||(s[1]=n=>h(o)?o.value=n:null),type:"text",placeholder:"Due date"},null,512),[[m,c(o)]])])]),t("div",null,[t("div",{class:"edit-tasks-modal__buttons"},[t("button",{class:"edit-tasks-modal__delete",onClick:_},"Delete"),t("button",{class:"edit-tasks-modal__done",onClick:v},"Done")])])])]))}});export{N as default};
